# Enable Directory Listing with Fancy Options
Options +Indexes
IndexOptions FancyIndexing NameWidth=* DescriptionWidth=*

# Redirect Paths Without Trailing Slashes
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^(.*)$ /$1/ [L,R=301]

# Enable CORS for Cross-Origin Requests
<IfModule mod_headers.c>
    # Allow access from the specific frontend origin
    Header set Access-Control-Allow-Origin "https://breezybeatsmusic.freewebhostmost.com"
    Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>

# Allow Access to /songs/ Directory
<Directory "/songs/">
    Require all granted
    Options +Indexes
</Directory>

# Block Access to Hidden Files (e.g., .htaccess, .env)
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# Error Documents (Optional)
ErrorDocument 403 "Access Forbidden"
ErrorDocument 404 "Page Not Found"

# Additional Security Headers (Optional)
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "DENY"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>
